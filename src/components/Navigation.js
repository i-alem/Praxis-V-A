export class Navigation {
    constructor() {
        // Will be initialized after render
    }

    setupMobileMenu() {
        const hamburger = document.getElementById('hamburger');
        const navMenu = document.getElementById('nav-menu');

        if (hamburger && navMenu) {
            hamburger.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                hamburger.classList.toggle('active');
                navMenu.classList.toggle('active');
                document.body.style.overflow = navMenu.classList.contains('active') ? 'hidden' : '';
            });

            document.addEventListener('click', (e) => {
                if (!hamburger.contains(e.target) && !navMenu.contains(e.target)) {
                    hamburger.classList.remove('active');
                    navMenu.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });

            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', () => {
                    hamburger.classList.remove('active');
                    navMenu.classList.remove('active');
                    document.body.style.overflow = '';
                });
            });
        }
    }

    setupScrollEffect() {
        window.addEventListener('scroll', () => {
            const navbar = document.querySelector('.navbar');
            navbar.style.background = window.scrollY > 50 ? 'rgba(255, 255, 255, 0.98)' : 'rgba(255, 255, 255, 0.95)';
            navbar.style.boxShadow = window.scrollY > 50 ? '0 2px 20px rgba(0, 0, 0, 0.1)' : 'none';
        });
    }

    setupSmoothScrolling() {
        document.querySelectorAll('a[href^="#"]:not([href="#"])').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    window.scrollTo({ top: target.offsetTop - 70, behavior: 'smooth' });
                }
            });
        });
    }

    init() {
        this.setupMobileMenu();
        this.setupScrollEffect();
        this.setupSmoothScrolling();
    }

    render() {
        return `
            <nav class="navbar">
                <div class="nav-container">
                    <div class="nav-logo">
                        <a href="/" class="logo-link">
                            <svg width="400" height="401" viewBox="0 0 400 401" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M251.156 126.746C263.506 149.415 270.504 183.417 267.622 261.519C324.02 194.751 341.786 8.11485 291.293 65.5426C265.564 94.8052 251.156 126.746 251.156 126.746Z" fill="#98BBCE"/>
                                <path d="M69.4071 267.084C100.603 217.008 163.266 255.087 209.373 267.246C243.313 276.196 165.102 248.896 125.392 225.869C83.8145 201.758 88.3886 179.399 89.7836 147.973C90.7259 126.746 108.103 93.981 111.19 69.046C112.823 55.8572 112.657 47.7184 109.338 34.4255C104.809 16.2909 117.426 -2.81541 132.802 1.65962C168.206 11.9633 236.542 92.9507 254.449 175.999C263.46 217.793 265.171 251.996 253.009 283.776C239.564 318.906 210.196 346.422 188.378 361.878C162.701 380.067 134.861 394.026 114.072 392.995C94.5185 392.026 82.5802 370.731 68.7895 374.655C57.0579 377.993 38.3264 406.671 28.2406 393.613C16.3024 378.158 55.6162 369.091 62.8204 346.628C69.5299 325.708 45.6603 305.203 69.4071 267.084Z" fill="#98BBCE"/>
                                <path d="M233.867 365.587C220.529 380.631 204.263 391.483 203.609 385.37C203.058 380.219 210.832 374.25 217.194 365.587C222.34 358.581 225.128 354.459 230.573 344.98C238.268 331.585 236.478 334.47 241.688 322.93C246.247 312.832 248.038 308.505 253.009 299.85C257.743 291.607 262.066 283.776 267.005 276.563C275.333 264.405 276.885 262.55 283.884 251.628C287.885 245.384 287.589 236.791 293.146 232.875C297.642 229.708 298.445 231.219 300.762 228.754C304.055 225.251 304.91 222.118 307.349 215.771C310.436 207.734 312.891 203.46 317.846 196.4C323.198 188.775 327.904 184.268 334.107 178.472C340.265 172.716 342.957 169.816 348.103 166.519C350.255 165.141 354.21 165.292 354.896 167.756C355.549 170.103 354.342 171.007 353.518 171.624L353.455 171.671C348.927 175.071 347.231 172.865 342.546 175.793C336.081 179.831 328.987 185.909 324.227 191.866C316.652 201.346 313.112 207.322 310.024 215.771C308.365 220.312 306.114 230.402 306.114 230.402C306.114 230.402 315.993 218.656 323.609 212.474C332.999 204.852 342.134 198.873 345.633 197.018C353.558 192.818 358.258 191.042 365.187 188.569C369.012 187.204 375.124 186.508 374.998 190.63C374.944 192.416 373.832 192.691 372.597 192.897C366.216 193.962 363.746 191.042 353.455 195.782C342.421 200.863 335.018 206.086 325.462 214.122C315.17 222.778 308.691 230.815 308.995 234.318C309.334 238.219 310.436 238.439 309.818 242.149C309.221 245.738 305.702 250.598 303.232 253.071C297.676 258.633 293.969 261.107 290.264 268.938C285.743 278.495 285.516 279.448 277.915 294.904C269.736 311.532 271.74 311.802 255.067 338.179C248.105 349.194 250.127 347.247 233.867 365.587Z" fill="#98BBCE"/>
                                <path d="M251.156 126.746C263.506 149.415 270.504 183.417 267.622 261.519C324.02 194.751 341.786 8.11485 291.293 65.5426C265.564 94.8052 251.156 126.746 251.156 126.746Z" stroke="#98BBCE"/>
                                <path d="M69.4071 267.084C100.603 217.008 163.266 255.087 209.373 267.246C243.313 276.196 165.102 248.896 125.392 225.869C83.8145 201.758 88.3886 179.399 89.7836 147.973C90.7259 126.746 108.103 93.981 111.19 69.046C112.823 55.8572 112.657 47.7184 109.338 34.4255C104.809 16.2909 117.426 -2.81541 132.802 1.65962C168.206 11.9633 236.542 92.9507 254.449 175.999C263.46 217.793 265.171 251.996 253.009 283.776C239.564 318.906 210.196 346.422 188.378 361.878C162.701 380.067 134.861 394.026 114.072 392.995C94.5185 392.026 82.5802 370.731 68.7895 374.655C57.0579 377.993 38.3264 406.671 28.2406 393.613C16.3024 378.158 55.6162 369.091 62.8204 346.628C69.5299 325.708 45.6603 305.203 69.4071 267.084Z" stroke="#98BBCE"/>
                                <path d="M233.867 365.587C220.529 380.631 204.263 391.483 203.609 385.37C203.058 380.219 210.832 374.25 217.194 365.587C222.34 358.581 225.128 354.459 230.573 344.98C238.268 331.585 236.478 334.47 241.688 322.93C246.247 312.832 248.038 308.505 253.009 299.85C257.743 291.607 262.066 283.776 267.005 276.563C275.333 264.405 276.885 262.55 283.884 251.628C287.885 245.384 287.589 236.791 293.146 232.875C297.642 229.708 298.445 231.219 300.762 228.754C304.055 225.251 304.91 222.118 307.349 215.771C310.436 207.734 312.891 203.46 317.846 196.4C323.198 188.775 327.904 184.268 334.107 178.472C340.265 172.716 342.957 169.816 348.103 166.519C350.255 165.141 354.21 165.292 354.896 167.756C355.549 170.103 354.342 171.007 353.518 171.624L353.455 171.671C348.927 175.071 347.231 172.865 342.546 175.793C336.081 179.831 328.987 185.909 324.227 191.866C316.652 201.346 313.112 207.322 310.024 215.771C308.365 220.312 306.114 230.402 306.114 230.402C306.114 230.402 315.993 218.656 323.609 212.474C332.999 204.852 342.134 198.873 345.633 197.018C353.558 192.818 358.258 191.042 365.187 188.569C369.012 187.204 375.124 186.508 374.998 190.63C374.944 192.416 373.832 192.691 372.597 192.897C366.216 193.962 363.746 191.042 353.455 195.782C342.421 200.863 335.018 206.086 325.462 214.122C315.17 222.778 308.691 230.815 308.995 234.318C309.334 238.219 310.436 238.439 309.818 242.149C309.221 245.738 305.702 250.598 303.232 253.071C297.676 258.633 293.969 261.107 290.264 268.938C285.743 278.495 285.516 279.448 277.915 294.904C269.736 311.532 271.74 311.802 255.067 338.179C248.105 349.194 250.127 347.247 233.867 365.587Z" stroke="#98BBCE"/>
                            </svg>
                            <span class="logo-text">Praxis Vital & Active</span>
                        </a>
                    </div>
                    <div class="nav-menu" id="nav-menu">
                        <a href="/#services" class="nav-link">Leistungen</a>
                        <a href="/#practice" class="nav-link">Praxis</a>
                        <a href="/#contact" class="nav-link">Kontakt</a>
                        <a href="https://medifox.de/termine" target="_blank" class="nav-link cta-link">Termin buchen</a>
                    </div>
                    <div class="hamburger" id="hamburger">
                        <span class="bar"></span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                    </div>
                </div>
            </nav>
        `;
    }
}
